<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Forest Gather 3</title>
    <link href="style.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://mmcc.mq.edu.au/mmcc3045/resources/week5/jquery-ui.js"></script>
    <script src="scripts.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Water+Brush&display=swap" rel="stylesheet">

    <script>

        $(document).ready(function () {
            $('img.approval').hide();
            var approval = getApproval();
            var mushrooms = getMushrooms();
            var goodMushroom = getGoodMushroom();
            var badMushroom = getBadMushroom();
            var day = getDay();
            var counter = mushrooms;
            $('div#gatherTextR').hide()
            $('img.arrowR').hide()
            $('img.goodMushroom').click(eventHandler);
            $('img.badMushroom').click(eventHandler);

            if (mushrooms == 2){
                $('div#mushroomCurrent').show().text('2');
            }
            $('img#leccinium').click(function (){
                $('img#leccinium').hide(1000);
            })

            $('img#lecciniumB').click(function (){
                $('img#lecciniumB').hide(1000);
            })

            $('img#deathCap').click(function (){
                $('img#deathCap').hide(1000);
            })

            $('img#deathCapB').click(function (){
                $('img#deathCapB').hide(1000);
            })

            function eventHandler(el) {
                counter++;
                $('img.badMushroom').click(function (){
                    badMushroom = badMushroom + 1;
                    saveBadMushroom(badMushroom);  
                })
                $('img.goodMushroom').click(function (){
                    goodMushroom = goodMushroom + 1;
                    saveGoodMushroom(goodMushroom);  
                })
                if (counter == 3){
                    $('div#mushroomCurrent').show().text('3');
                    mushrooms = mushrooms+1;
                    saveMushrooms(mushrooms);
                }
                if (counter == 4){            
                    $('div#mushroomCurrent').show().text('4');   
                    $('div#gatherTextR').css({
                        fontSize: 15,
                        top: 437
                    })
                    $('img.arrowR').show();
                    $('img.goodMushroom').hide(1000);    
                    $('img.badMushroom').hide(1000);    
                    mushrooms = mushrooms+1;
                    saveMushrooms(mushrooms);  
                    finishedGame = 'foragingText';
                    saveFinishedGame(finishedGame);
                    if (day == 'Day1'){
                        $('div#gatherTextR').show().text('Go To Town');
                        $('div#gatherTextR').click(function (){
                            window.location = 'town.html';
                        }) 
                    }
                    if (day == 'Day2'){
                        $('div#gatherTextR').show().text('Go To Ball');
                        $('div#gatherTextR').click(function (){
                            window.location = 'townNight.html';
                        }) 
                    }
                }
            }
            if (approval >= 0 && approval <= 20){
            $('img#sadFace').show();
            }
            if (approval >= 21 && approval <= 40){
                $('img#halfSadFace').show();
            }
            if (approval >= 41 && approval <= 60){
                $('img#happySadFace').show();
            }
            if (approval >= 61 && approval <= 80){
                $('img#halfHappyFace').show();
            }
            if (approval > 80){
                $('img#happyFace').show();
            }
        });
        
    </script>
</head>

<body>
    <div id="stage">
        <img src="Images/Pages/forestGather3.png" class="scene" alt="Scene">
        <img src="Images/UI/arrowRight.png" id="gatherRArrow" class="arrowR" alt="Arrow"> 
        <img src="Images/UI/sadFace.png" id="sadFace" class="approval" alt="Approval">
        <img src="Images/UI/halfSad.png" id="halfSadFace" class="approval" alt="Approval">
        <img src="Images/UI/happySad.png" id="happySadFace" class="approval" alt="Approval">
        <img src="Images/UI/halfHappy.png" id="halfHappyFace" class="approval" alt="Approval">
        <img src="Images/UI/happyFace.png" id="happyFace" class="approval" alt="Approval">
        <img src="Images/Minigame/lecciniumScabrumMushroom.png" id="leccinium" class="goodMushroom" alt="Mushroom">
        <img src="Images/Minigame/lecciniumScabrumMushroom.png" id="lecciniumB" class="goodMushroom" alt="Mushroom">
        <img src="Images/Minigame/deathCapMushroom.png" id="deathCap" class="badMushroom" alt="Mushroom">
        <img src="Images/Minigame/deathCapMushroom.png" id="deathCapB" class="badMushroom" alt="Mushroom">
        <img src="Images/UI/basket.png" id="emptyBasket" class="basket" alt="Basket">
        <div id="gatherTextR" class="textArrow"><span></span></div>
        <div id="mushroomCurrent" class="score"><span></span></div>
        <div id="mushroomScore" class="score"><span>/4</span></div>
    </div>   
</body>

</html>